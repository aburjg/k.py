rev(scan(add)(rev(scan(add)(rev(scan(add)([1,1])))))) # fib |+\1 1
# [5, 3]
over(mul)(add(1,til(5))) # */1+!5
# 120
scan(mul)(add(1,til(5))) # *\1+!5
# [1, 2, 6, 24, 120]
# {-+/log2(x)}[0.2 0.3 0.5] 
H = lambda x: neg(over(add)(monad(lambda x:math.log2(x))(x)))
H([0.2, 0.3, 0.5])
# 5.058893689053568

#  p) var('l',monad(lambda x:math.log2(x)))
# <function <lambda>.<locals>.<lambda> at 0x1008d68b0>
#  - +/ l @ 0.2 , 0.3 , 0.5
# 5.058893689053568

#  +/ a : +\ ! 5
# 20
#  | +\ | +\ | +\ | +\ | +\ 1 , 1
# 13 8

##################################

+/x%#x:!10
4.5
/ (+/x)%#x:!10    ()'s
/ {(+/x)%#x}@!10  {}'s or ::'s i.e. avg::(+/x)%#x

/ madhava
n:10000; sign:-*\-_1+2_1%!2+n; term:1,1%1_1+2*!n; 4*+/sign*term
3.1414926535900345

even:2*!; odd:1+even
 even@10
[0, 2, 4, 6, 8, 10, 12, 14, 16, 18]
 odd@10
[1, 3, 5, 7, 9, 11, 13, 15, 17, 19]
   
 ح:!٥
[0, 1, 2, 3, 4]
 ح
[0, 1, 2, 3, 4]
   
 \t n:1000000; ones:_a%a:1+!n; */ones*1+1%#ones
0.41020320798270404
 
 */x*1+1%#x:_x%x:1+!1000000
2.7182804690959363

/ rlwrap pypy3 k.py
   
 (+/a)%#a:!100
49.5
   
 ((1+1)*2)-1
3
   
 +/1__+\(1,2,3)%2
4

/ madhava, again
 4*+/(-*\-_a%a:1+!n)*1%1+2*!n:1000000
3.1415916535897743

/ matrix
 a:(,,1,2),(,3,4); (a@0)@0
[1, 2]
   
 -*\-0<1+!10
[1, -1, 1, -1, 1, -1, 1, -1, 1, -1]

 til 5
[0, 1, 2, 3, 4]
 
 1 add 1
2
   
 0 less 1 add (til n var 10)
[1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
 
 0 less 1 add + til n var 10
 !'function' object is not iterable
 
 0<1+!n:10
[1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
 
 +/[1,2,3,1.1]
7.1
   
>>> var('a', e(p(t('1+!')))); e(cat(a, lst('10')))
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
>>> a
['1', '+', '!']
>>> 
>>> var('a', e(p(t('1+')))); e(cat(a, lst('10')))
11
>>> a
['1', '+']
>>> 
   
 a:p(t"1+!")
['1', '+', '!']
   
 a:p(t"1+!5")
['1', '+', '!', '5']
 e a
[1, 2, 3, 4, 5]
   
 a:p@t"1+!"; e a,,"10"
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
   
 ones:p@t"-*\-0<1+!"; +\e ones,,"10"
[1, 0, 1, 0, 1, 0, 1, 0, 1, 0]
   
 a:p@t"1+!x"; 
[]
 x:10; e a
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
   
 neg mul \ neg 0 less 1 add (til n var 10)
[1, -1, 1, -1, 1, -1, 1, -1, 1, -1]
   
 10+{2*!x}[10]+1
[10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30]
   
 even:{2*!x}; odd:{1+even x};
[]
 ones:{-*\-0<1+!x};
[]
 4*+/(ones n)*1%(odd n:1000)
3.140592653839794
   
 {*/x*0<1+!y}[2,5]
32
   
 {*/(0<1+!x)*1+1%x}[1000]
2.7169239322355985
   
>>> over(E('{x*y}'))(add(1,til(5)))
120
>>> scan(E('{x*y}'))(add(1,til(5)))
[1, 2, 6, 24, 120]
   
 {x+y}/!12
66
 {x+y}\!12
[0, 1, 3, 6, 10, 15, 21, 28, 36, 45, 55, 66]
 a:{x+y}
('{', ['x', '+', 'y'])
 a\!12
[0, 1, 3, 6, 10, 15, 21, 28, 36, 45, 55, 66]
 a/!12
66
   
>>> each_left(mul)([1, 2, 3], [1,2])
[[1, 2], [2, 4], [3, 6]]
>>> each_right(mul)([1, 2, 3], [1,2])
[[1, 2, 3], [2, 4, 6]]
   
 (1,2){-x*y}\!5
[[0, 0], [-1, -2], [-2, -4], [-3, -6], [-4, -8]]
   
 (1,2,3)*\(1,2)
[[1, 2, 3], [2, 4, 6]]
   
 +/(!12)=/!12
[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
   
 {1+!12}
('{', ['1', '+', '!', '12'])
 {1+!12}[]
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]
   
 a{+/x*y}\a:(,1,2),(,2,3)
[[5, 8], [8, 13]]
   
 &0,2=+/0=(a){x mod y}/a:1+!50
[2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47]
   
  where 0 cat 2 eql (add / 0 eql (a) {x mod y} / a:1 add (!50))
[2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47]
   
 0{1+1%x}/1
1.618033988749895
   
 5{1+1%x}\1
[1, 2.0, 1.5, 1.6666666666666665, 1.6, 1.625]
   
 %/100{|+\x}/1,2
1.618033988749895
   
 5{|+\x}\1,2
[[1, 2], [3, 1], [4, 3], [7, 4], [11, 7], [18, 11]]
   
 |10{(#x),x}/0
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]
 
 !10
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
 
 &0,10
[1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
 
 &&0,10
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
  
 0{,/x}/,,1,,1,1
[1, 1, 1]
  
 raze:{0{,/x}/x}
('{', ['0', ('{', [',', '/', 'x']), '/', 'x'])
 raze (,,1,,1,1)
[1, 1, 1]
  
 softmax:{(exp[x])%+/exp[x]}
('{', [('(', ['exp', ('[', ['x'])]), '%', '+', '/', 'exp', ('[', ['x'])])
 
 softmax[,1,2]
[0.2689414213699951, 0.7310585786300049]
  
>>> a(E('{y*x}'),{})(2,10)
20
  
# mod[x;y]
>>>> where 0 cat 2 eql add / 0 eql m {x mod y} / m var 1 add til 50
[2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47]
  
# a(neg,{})([1,2,3]) ;a(E('{y*x}'),{})(2,10);+/!{x*y}[10;2]+1
  
 {mul[x;y]}[!12;0.5]
[0.0, 0.5, 1.0, 1.5, 2.0, 2.5, 3.0, 3.5, 4.0, 4.5, 5.0, 5.5]
  
 where 0 cat 2 eql add / 0 eql m {mod[x;y]} / m var 1 add til 50
[2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47]
  
 +[10;!2]
[10, 11]
  
 {exp[m]%+/exp m:x*.1}[1,2,3,10]
[0.1728256907356951, 0.19100192729742607, 0.21108977534551449, 0.4250826066213644]
  
 4{=\x}\0*!10
[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 1, 0, 1, 0, 1, 0, 1, 0, 1], [0, 0, 1, 1, 0, 0, 1, 1, 0, 0], [0, 1, 1, 1, 0, 1, 1, 1, 0, 1], [0, 0, 0, 0, 1, 1, 1, 1, 0, 0]]
  
# apply('{x*y}', '[0.5;!10]')
# apply(add,1,[1,12])
# apply(add,'[!12;1]')
# apply('-',[1,12])
# apply('-',[1,12],[10,10])
# apply('+','[1;!12]')
# apply(apply(add, left), [1,2],[1,2,3])
# apply(apply('+', over), [1,2])
# apply(apply("+", over),"[!12]")
# apply(apply("+",left),[1,2,3],[1])
# apply(apply('{x+y}', over), [1,2])
# apply(apply('{x+y}', left), [1,2],[1])
# apply(apply('{1+1%x}',Fix),1,5)
# apply('{x*y}', eval(p(t('[0.5;!10]'))))
  
 {x[y]}[neg;10]-1
-11
  
 {mul[10;x]}[!12]
[0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100, 110]
 {{x}[x]}[10]
10
  
 apply[til;5]
[0, 1, 2, 3, 4]
 
 apply[add;5;12]
17
 
 apply[add;5;!12]
[5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16]
  
 +/+/a{+/x*y}\a:,[,[1,2];,[3,4]]
54
  
>>> tanh=monad(math.tanh); pi=math.pi; E('gelu:{.5*x*(1+tanh[sqrt[2%pi]*(x+0.044715*x*x*x)])};gelu[1]')
0.8411919906082768
  
>>> max=dyad(max); k('{exp[m]%+/exp m:x-max/x}[1,2,3,10]')
[0.00012324087112063384, 0.0003350034204906821, 0.0009106337103914456, 0.9986311219979973]
  
>>> log=monad(math.log2); ln=monad(math.log); k('+/-x*log[x:.1,.2,.3,.4]')
1.8464393446710154
  
>>> k('avg:{+/x%#x};vAr:{avg[x*x]-a*a:avg[x]};vAr[!10]')
8.25
  
 0{(0=+/0=x)*{mod[y;x]}\|x}\12,8
[[12, 8], [8, 4], [4, 0], [0, 0]]
  
 **(-2)_0{(0=+/0=x)*{mod[y;x]}\|x}\42,56
14
  
 &2=+/0=(a)mod/a:!50
[2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47]
  
 pow:{exp y*ln x}; pow[2;0.5]
1.414213562373095
  
 softmax:{exp[a]%+/exp a:x-max/x}; softmax[1,2]
[0.2689414213699951, 0.7310585786300049]
 
 gelu:{0.5*x*1+tanh sqrt[2%pi]*x+0.044715*x*x*x}; gelu[1]
0.8411919906082768
  
 rms:{y*x%%.00001++/x*x%#x}; rms[1,2,3;.5,1.5,2]
[0.23145477695600974, 1.3887286617360584, 2.7774573234721167]
      
 1+100{1%2+x}/1
1.4142135623730951
      
 fact:{*/1+!x}
('{', [['*', '/', 1, '+', '!', 'x']])
 bin:{fact[x]%fact[x-y]*fact[y]}
('{', [['fact', ('[', [['x']]), '%', 'fact', ('[', [['x', '-', 'y']]), '*', 'fact', ('[', [['y']])]])
 
 _bin[12;7]
792
